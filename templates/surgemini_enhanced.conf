# Enhanced configuration based on surgemini.conf and Surge_2024.conf

[General]
# --- GENERAL based on Surge_2024.conf, adjusted ---
# Enhanced Wi-Fi Assist (Keep disabled as in surgemini)
# wifi-assist = true
# Hybrid Network
all-hybrid = false
# Gaming Optimization (Keep enabled as in surgemini)
udp-priority = true
# Latency Benchmark (Use surgemini URLs)
internet-test-url = http://connectivitycheck.platform.hicloud.com/generate_204
proxy-test-url = http://latency-test.skk.moe/endpoint
test-timeout = 15 # Use surgemini timeout
# GeoIP Database (Use surgemini URL)
geoip-maxmind-url = https://github.com/xream/geoip/releases/latest/download/ipinfo.country.mmdb
disable-geoip-db-auto-update = false # Added from surgemini
ipv6 = false # Keep disabled as requested
# --- Wi-Fi ACCESS (Keep disabled as in surgemini) ---
allow-wifi-access = false
# Surge iOS - é»˜è®¤ HTTP ç«¯å£å·ï¼š6152ï¼ŒSOCKS5 ç«¯å£å·ï¼š6153
wifi-access-http-port = 6152
wifi-access-socks5-port = 6153
# Surge Mac - é»˜è®¤ HTTP ç«¯å£å·ï¼š6152ï¼ŒSOCKS5 ç«¯å£å·ï¼š6153
http-listen = 0.0.0.0
socks5-listen = 0.0.0.0
# å…è®¸çƒ­ç‚¹å…±äº«
allow-hotspot-access = true
# --- REMOTE CONTROLLER (Add from surgemini modifications) ---
external-controller-access = YOUR_PASSWORD@0.0.0.0:6160 # REMEMBER TO CHANGE PASSWORD
http-api = YOUR_PASSWORD@0.0.0.0:6166 # REMEMBER TO CHANGE PASSWORD
http-api-tls = false # Disable TLS as per previous step
http-api-web-dashboard = true # Enable Web UI
# --- COMPATIBILITY (Use surgemini value) ---
compatibility-mode = 1
# è·³è¿‡ä»£ç† (Use surgemini list)
skip-proxy = 127.0.0.1, 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 100.64.0.0/10, localhost, *.local, iosapps.itunes.apple.com, seed-sequoia.siri.apple.com, sequoia.apple.com
exclude-simple-hostnames = true
# --- DNS (Use surgemini settings) ---
# The IP addresses of upstream DNS servers
dns-server = 223.5.5.5, 119.29.29.29
# read-etc-hosts = true # Keep disabled as in surgemini
# use-local-host-item-for-proxy = true # Keep disabled as in surgemini
encrypted-dns-server = https://223.5.5.5/dns-query,https://1.12.12.12/dns-query
doh-skip-cert-verification = true # From surgemini
# encrypted-dns-follow-outbound-mode = false
# include-all-networks = false
# --- ROUTING ---
# include-local-networks = false
loglevel = notify # Use surgemini loglevel
# --- ADVANCED ---
show-error-page-for-reject = true
udp-policy-not-supported-behaviour = REJECT # From surgemini
ipv6-vif = auto # From surgemini (though ipv6 is disabled overall)
# always-real-ip = link-ip.nextdns.io, *.msftconnecttest.com, *.msftncsi.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, *.logon.battlenet.com.cn, *.logon.battle.net, stun.l.google.com # Keep disabled as in surgemini
# hijack-dns = 8.8.8.8:53, 8.8.4.4:53 # Keep disabled as in surgemini
# force-http-engine-hosts = *.ott.cibntv.net, 123.59.31.1,119.18.193.135, 122.14.246.33, 175.102.178.52, 116.253.24.*, 175.6.26.*, 220.169.153.* # Keep disabled as in surgemini
# use-default-policy-if-wifi-not-primary = false

[Ponte]
# From surgemini.conf
server-proxy-name = ðŸ‡­ðŸ‡° é¦™æ¸¯èŠ‚ç‚¹

[Proxy]
# From surgemini.conf (Empty, relies on Proxy Group policy-path)

[Proxy Group]
# From surgemini.conf
ðŸš€ èŠ‚ç‚¹åˆ‡æ¢ = select, "â™»ï¸ è‡ªåŠ¨é€‰æ‹©", "ðŸ‡¸ðŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹", "ðŸ‡­ðŸ‡° é¦™æ¸¯èŠ‚ç‚¹", "ðŸ‡ºðŸ‡² ç¾Žå›½èŠ‚ç‚¹", "ðŸŒ å…¶ä»–èŠ‚ç‚¹", "ðŸŒˆ æ‰‹åŠ¨é€‰æ‹©", "ðŸ•‹ è‡ªå»ºèŠ‚ç‚¹", DIRECT
ðŸŒˆ æ‰‹åŠ¨é€‰æ‹© = select, no-alert=0, hidden=0, include-all-proxies=1, update-interval=3600, policy-path=https://sub.store/download/collection/ZH?target=Surge
â™»ï¸ è‡ªåŠ¨é€‰æ‹© = smart, no-alert=0, hidden=0, include-all-proxies=1, update-interval=3600, policy-path=https://sub.store/download/collection/ZH?target=Surge
ðŸ“² ç”µæŠ¥æ¶ˆæ¯ = select, "ðŸ•‹ è‡ªå»ºèŠ‚ç‚¹", "â™»ï¸ è‡ªåŠ¨é€‰æ‹©", "ðŸ‡¸ðŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹", "ðŸ‡­ðŸ‡° é¦™æ¸¯èŠ‚ç‚¹", "ðŸ‡ºðŸ‡² ç¾Žå›½èŠ‚ç‚¹", "ðŸŒ å…¶ä»–èŠ‚ç‚¹", "ðŸŒˆ æ‰‹åŠ¨é€‰æ‹©", DIRECT
ðŸ’¬ OpenAi = select, "ðŸ¤– AI æœåŠ¡", "ðŸŒˆ æ‰‹åŠ¨é€‰æ‹©", "â™»ï¸ è‡ªåŠ¨é€‰æ‹©", "ðŸ‡¸ðŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹", "ðŸ‡ºðŸ‡² ç¾Žå›½èŠ‚ç‚¹", DIRECT
ðŸ“¹ æ²¹ç®¡è§†é¢‘ = select, "ðŸ•‹ è‡ªå»ºèŠ‚ç‚¹", "â™»ï¸ è‡ªåŠ¨é€‰æ‹©", "ðŸ‡¸ðŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹", "ðŸŽ¬ æµåª’ä½“è§£é”", "ðŸŒ å…¶ä»–èŠ‚ç‚¹", "ðŸŒˆ æ‰‹åŠ¨é€‰æ‹©", DIRECT
ðŸŽ¥ å¥ˆé£žè§†é¢‘ = select, "ðŸ•‹ è‡ªå»ºèŠ‚ç‚¹", "â™»ï¸ è‡ªåŠ¨é€‰æ‹©", "ðŸ‡¸ðŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹", "ðŸŽ¬ æµåª’ä½“è§£é”", "ðŸŒ å…¶ä»–èŠ‚ç‚¹", "ðŸŒˆ æ‰‹åŠ¨é€‰æ‹©", DIRECT
ðŸŽ¬ è¿ªå£«å°¼+ = select, "ðŸŽ¬ æµåª’ä½“è§£é”", "ðŸ‡¸ðŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹", "ðŸ‡­ðŸ‡° é¦™æ¸¯èŠ‚ç‚¹", "ðŸŒˆ æ‰‹åŠ¨é€‰æ‹©", "â™»ï¸ è‡ªåŠ¨é€‰æ‹©", DIRECT
ðŸ“¢ è°·æ­ŒFCM = select, "ðŸ•‹ è‡ªå»ºèŠ‚ç‚¹", "â™»ï¸ è‡ªåŠ¨é€‰æ‹©", "ðŸ‡¸ðŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹", "ðŸ‡­ðŸ‡° é¦™æ¸¯èŠ‚ç‚¹", "ðŸ‡ºðŸ‡² ç¾Žå›½èŠ‚ç‚¹", "ðŸŒ å…¶ä»–èŠ‚ç‚¹", "ðŸŒˆ æ‰‹åŠ¨é€‰æ‹©", DIRECT
â“‚ï¸ å¾®è½¯æœåŠ¡ = select, "ðŸ•‹ è‡ªå»ºèŠ‚ç‚¹", "â™»ï¸ è‡ªåŠ¨é€‰æ‹©", "ðŸ‡¸ðŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹", "ðŸ‡­ðŸ‡° é¦™æ¸¯èŠ‚ç‚¹", "ðŸ‡ºðŸ‡² ç¾Žå›½èŠ‚ç‚¹", "ðŸŒ å…¶ä»–èŠ‚ç‚¹", "ðŸŒˆ æ‰‹åŠ¨é€‰æ‹©", DIRECT
ðŸŽ è‹¹æžœæœåŠ¡ = select, "ðŸ•‹ è‡ªå»ºèŠ‚ç‚¹", "â™»ï¸ è‡ªåŠ¨é€‰æ‹©", "ðŸ‡¸ðŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹", "ðŸ‡­ðŸ‡° é¦™æ¸¯èŠ‚ç‚¹", "ðŸ‡ºðŸ‡² ç¾Žå›½èŠ‚ç‚¹", "ðŸŒ å…¶ä»–èŠ‚ç‚¹", "ðŸŒˆ æ‰‹åŠ¨é€‰æ‹©", DIRECT
ðŸŽ® æ¸¸æˆå¹³å° = select, "ðŸ•‹ è‡ªå»ºèŠ‚ç‚¹", "â™»ï¸ è‡ªåŠ¨é€‰æ‹©", "ðŸ‡¸ðŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹", "ðŸ‡­ðŸ‡° é¦™æ¸¯èŠ‚ç‚¹", "ðŸ‡ºðŸ‡² ç¾Žå›½èŠ‚ç‚¹", "ðŸŒ å…¶ä»–èŠ‚ç‚¹", "ðŸŒˆ æ‰‹åŠ¨é€‰æ‹©", DIRECT
ðŸŽ¯ å…¨çƒç›´è¿ž = select, DIRECT, "ðŸš€ èŠ‚ç‚¹åˆ‡æ¢", "â™»ï¸ è‡ªåŠ¨é€‰æ‹©"
ðŸ›‘ å¹¿å‘Šæ‹¦æˆª = select, REJECT, DIRECT
ðŸƒ åº”ç”¨å‡€åŒ– = select, REJECT, DIRECT
ðŸ›¡ï¸ éšç§é˜²æŠ¤ = select, REJECT, DIRECT
ðŸŸ æ¼ç½‘ä¹‹é±¼ = select, "ðŸš€ èŠ‚ç‚¹åˆ‡æ¢", "ðŸŒˆ æ‰‹åŠ¨é€‰æ‹©", "â™»ï¸ è‡ªåŠ¨é€‰æ‹©", DIRECT, "ðŸ•‹ è‡ªå»ºèŠ‚ç‚¹", "ðŸ‡­ðŸ‡° é¦™æ¸¯èŠ‚ç‚¹", "ðŸ‡¸ðŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹", "ðŸ‡ºðŸ‡² ç¾Žå›½èŠ‚ç‚¹", "ðŸŒ å…¶ä»–èŠ‚ç‚¹"
# > å¤–éƒ¨èŠ‚ç‚¹è‡ªåŠ¨åŒ¹é…
# > åŒ¹é…åˆ°å…³é”®å­—ï¼Œè‡ªåŠ¨æ”¶çº³ä¸ºèŠ‚ç‚¹ç»„
ðŸ‡­ðŸ‡° é¦™æ¸¯èŠ‚ç‚¹ = smart, policy-path=https://sub.store/download/collection/ZH?target=Surge, policy-regex-filter=(ðŸ‡­ðŸ‡°)|(æ¸¯)|(Hong)|(HK), url=http://www.gstatic.com/generate_204, interval=300, tolerance=150
ðŸ‡ºðŸ‡² ç¾Žå›½èŠ‚ç‚¹ = smart, policy-path=https://sub.store/download/collection/ZH?target=Surge, policy-regex-filter=(ðŸ‡ºðŸ‡¸)|(ç¾Ž)|(States)|(US), url=http://www.gstatic.com/generate_204, interval=300, tolerance=150
ðŸ‡¸ðŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹ = smart, policy-path=https://sub.store/download/collection/ZH?target=Surge, policy-regex-filter=(ðŸ‡¸ðŸ‡¬)|(æ–°)|(Singapore)|(SG), url=http://www.gstatic.com/generate_204, interval=300, tolerance=150
ðŸ¤– AI æœåŠ¡ = smart, policy-path=https://sub.store/download/collection/ZH?target=Surge, policy-regex-filter=(?i)^(?!.*(å›žå›½|æ ¡å›­)).*(openai|aiè§£é”|chatgpt|æ™ºèƒ½|ai|gpt).*, url=http://www.gstatic.com/generate_204, interval=300, tolerance=150
ðŸŽ¬ æµåª’ä½“è§£é” = smart, policy-path=https://sub.store/download/collection/ZH?target=Surge, policy-regex-filter=(?i)^(?!.*(å›žå›½|æ ¡å›­)).*(æµåª’ä½“|è§£é”|netflix|disney|hulu|hbo|prime|youtube).*, url=http://www.gstatic.com/generate_204, interval=300, tolerance=150
ðŸŒ å…¶ä»–èŠ‚ç‚¹ = smart, policy-path=https://sub.store/download/collection/ZH?target=Surge, policy-regex-filter=(?i)^(?!.*(å›žå›½|æ ¡å›­|ðŸ‡ºðŸ‡¸|ç¾Ž|States|US|ðŸ‡­ðŸ‡°|æ¸¯|Hong|HK|ðŸ‡¸ðŸ‡¬|æ–°|Singapore|SG)).*, url=http://www.gstatic.com/generate_204, interval=300, tolerance=150
# æ–°å¢žï¼šç”¨äºŽåŒ…å«æ‰‹åŠ¨å®šä¹‰çš„èŠ‚ç‚¹
ðŸ•‹ è‡ªå»ºèŠ‚ç‚¹ = select
ðŸš€ å¤‡ç”¨èŠ‚ç‚¹ = select, policy-path=è®¢é˜…åœ°å€, update-interval=0, no-alert=0, hidden=0, include-all-proxies=0, include-all-proxies=0, icon-url=https://raw.githubusercontent.com/Semporia/Hand-Painted-icon/master/Universal/Streaming.png

[Rule]
# --- Base/Custom Rules ---
DOMAIN-SUFFIX,nbcharts.com,"ðŸŽ¯ å…¨çƒç›´è¿ž"
# Bobå®¢æˆ·ç«¯ç›´è¿ž
PROCESS-NAME,/Applications/Bob.app/Contents/MacOS/Bob,DIRECT
# ChatGPTå®¢æˆ·ç«¯è¯­éŸ³
PROCESS-NAME,/Applications/ChatGPT.app/Contents/MacOS/ChatGPT,"ðŸ’¬ OpenAi"
# Claudeç½‘é¡µ
DOMAIN,claude.ai,"ðŸ’¬ OpenAi"
# é˜²æ­¢åº”ç”¨å¾ªçŽ¯è¯·æ±‚
IP-CIDR,0.0.0.0/32,REJECT,no-resolve

# --- Enhanced Rules (from Surge_2024.conf etc.) ---
# > Apple Intelligence
DOMAIN-SUFFIX,apple-relay.apple.com,"ðŸ’¬ OpenAi"
DOMAIN-SUFFIX,apple-relay.cloudflare.com,"ðŸ’¬ OpenAi"
DOMAIN-KEYWORD,apple-relay,"ðŸ’¬ OpenAi"
# > TMDB
DOMAIN-SUFFIX,api.themoviedb.org,"ðŸš€ èŠ‚ç‚¹åˆ‡æ¢"
# > SUFFIX
DOMAIN-SUFFIX,nssurge.com,"ðŸš€ èŠ‚ç‚¹åˆ‡æ¢"
# > DOMAIN
DOMAIN,jable.tv,"ðŸš€ èŠ‚ç‚¹åˆ‡æ¢"
# > Safari é˜²è·³è½¬
DOMAIN,app-site-association.cdn-apple.com,REJECT
# > ban UDP on Youtube
AND,((PROTOCOL,UDP), (DOMAIN-SUFFIX,googlevideo.com)),REJECT-NO-DROP
# > ban National Anti-fraud Center
DOMAIN,prpr.96110.cn.com,DIRECT
DOMAIN-KEYWORD,96110,REJECT
DOMAIN-SUFFIX,gjfzpt.cn,REJECT
# > Vercel --> sub-store
RULE-SET,https://raw.githubusercontent.com/getsomecat/GetSomeCats/Surge/rule/substore.list,"ðŸš€ èŠ‚ç‚¹åˆ‡æ¢"
DOMAIN-SUFFIX,vercel.app,"ðŸš€ èŠ‚ç‚¹åˆ‡æ¢"
# > pikpak
DOMAIN-SUFFIX,mypikpak.com,"ðŸ‡ºðŸ‡² ç¾Žå›½èŠ‚ç‚¹"

# --- AdBlock/Privacy Rules ---
# > AdBlock Main (skk.moe)
DOMAIN-SET,https://ruleset.skk.moe/List/domainset/reject.conf,REJECT,pre-matching,extended-matching
DOMAIN-SET,https://ruleset.skk.moe/List/domainset/reject_extra.conf,REJECT,pre-matching
RULE-SET,https://ruleset.skk.moe/List/non_ip/reject.conf,REJECT,pre-matching,extended-matching
RULE-SET,https://ruleset.skk.moe/List/non_ip/reject-no-drop.conf,REJECT-NO-DROP,pre-matching,extended-matching
RULE-SET,https://ruleset.skk.moe/List/non_ip/reject-drop.conf,REJECT-DROP,pre-matching
RULE-SET,https://ruleset.skk.moe/List/ip/reject.conf,REJECT-DROP
# > AdBlock Additional (bendusy)
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/classical/BanAD.list,"ðŸ›‘ å¹¿å‘Šæ‹¦æˆª"
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/classical/BanProgramAD.list,"ðŸ›‘ å¹¿å‘Šæ‹¦æˆª"
# > Application Purification (ACL4SSR)
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/BlockHttpDNS.list,"ðŸƒ åº”ç”¨å‡€åŒ–"
# > Privacy Protection (ACL4SSR)
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Privacy.list,"ðŸ›¡ï¸ éšç§é˜²æŠ¤"

# --- Unbreak Rules ---
# > Unbreak (bendusy)
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/classical/unbreak.list,"ðŸŽ¯ å…¨çƒç›´è¿ž"

# --- Direct Rules ---
# > Custom Direct (bendusy)
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/custom/argotunnel.list,"ðŸŽ¯ å…¨çƒç›´è¿ž"
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/custom/WeChat.list,"ðŸŽ¯ å…¨çƒç›´è¿ž"
# > Common Direct (bendusy)
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/classical/Cloudflare.list,"ðŸŽ¯ å…¨çƒç›´è¿ž"
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/geosite/cn_domain.mrs,"ðŸŽ¯ å…¨çƒç›´è¿ž"
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/classical/direct_all.list,"ðŸŽ¯ å…¨çƒç›´è¿ž"
# > Private Domains (bendusy)
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/geosite/private_domain.mrs,"ðŸŽ¯ å…¨çƒç›´è¿ž"
# > Download Direct (skk.moe)
DOMAIN-SET,https://ruleset.skk.moe/List/domainset/download.conf,"ðŸŽ¯ å…¨çƒç›´è¿ž",extended-matching
RULE-SET,https://ruleset.skk.moe/List/non_ip/download.conf,"ðŸŽ¯ å…¨çƒç›´è¿ž",extended-matching
# > ASN China (VirgilClyne)
RULE-SET,https://raw.githubusercontent.com/VirgilClyne/GetSomeFries/main/ruleset/ASN.China.list,"ðŸŽ¯ å…¨çƒç›´è¿ž"
# > Mail Direct
DOMAIN-SUFFIX,smtp,DIRECT
URL-REGEX,(Subject|HELO|SMTP),DIRECT

# --- Service Specific Rules ---
# > Apple
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/classical/apple_domains.list,"ðŸŽ è‹¹æžœæœåŠ¡"
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/geosite/apple_domain.mrs,"ðŸŽ è‹¹æžœæœåŠ¡"
RULE-SET,https://ruleset.skk.moe/List/non_ip/apple_cn.conf,"ðŸŽ¯ å…¨çƒç›´è¿ž" # Apple CN direct
DOMAIN-SET,https://ruleset.skk.moe/List/domainset/apple_cdn.conf,"ðŸŽ è‹¹æžœæœåŠ¡" # Apple CDN
# > Microsoft
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/classical/microsoft.list,"â“‚ï¸ å¾®è½¯æœåŠ¡"
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/geosite/microsoft_domain.mrs,"â“‚ï¸ å¾®è½¯æœåŠ¡"
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/geosite/onedrive_domain.mrs,"â“‚ï¸ å¾®è½¯æœåŠ¡" # OneDrive merged
RULE-SET,https://ruleset.skk.moe/List/non_ip/microsoft_cdn.conf,"â“‚ï¸ å¾®è½¯æœåŠ¡" # Microsoft CDN
# > Google & FCM
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/geosite/google_domain.mrs,"ðŸ“¢ è°·æ­ŒFCM"
RULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/GoogleFCM.list,"ðŸ“¢ è°·æ­ŒFCM"
# > AI Services
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/classical/ai_all.list,"ðŸ’¬ OpenAi"
RULE-SET,https://ruleset.skk.moe/List/non_ip/ai.conf,"ðŸ’¬ OpenAi" # Supplement AI
DOMAIN-SUFFIX,googleapis.com,"ðŸ’¬ OpenAi" # Gemini
# > Telegram
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/classical/telegram.list,"ðŸ“² ç”µæŠ¥æ¶ˆæ¯"
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/geosite/telegram_domain.mrs,"ðŸ“² ç”µæŠ¥æ¶ˆæ¯"
RULE-SET,https://ruleset.skk.moe/List/ip/telegram_asn.conf,"ðŸ“² ç”µæŠ¥æ¶ˆæ¯" # Telegram ASN
# > YouTube
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/classical/youtube.list,"ðŸ“¹ æ²¹ç®¡è§†é¢‘"
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/geosite/youtube_domain.mrs,"ðŸ“¹ æ²¹ç®¡è§†é¢‘"
# > Netflix
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/classical/netflix.list,"ðŸŽ¥ å¥ˆé£žè§†é¢‘"
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/geosite/netflix_domain.mrs,"ðŸŽ¥ å¥ˆé£žè§†é¢‘"
# > Disney+
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/classical/disney.list,"ðŸŽ¬ è¿ªå£«å°¼+"
# > TVB
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/custom/tvb.list,"ðŸŽ¬ æµåª’ä½“è§£é”"
# > Gaming
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/classical/gaming.list,"ðŸŽ® æ¸¸æˆå¹³å°"
# > Other Common Services (Proxy)
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/classical/github.list,"ðŸš€ èŠ‚ç‚¹åˆ‡æ¢"
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/geosite/github_domain.mrs,"ðŸš€ èŠ‚ç‚¹åˆ‡æ¢"
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/custom/notion.list,"ðŸš€ èŠ‚ç‚¹åˆ‡æ¢"
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/geosite/speedtest_domain.mrs,"ðŸš€ èŠ‚ç‚¹åˆ‡æ¢"
RULE-SET,https://ruleset.skk.moe/List/non_ip/global.conf,"ðŸš€ èŠ‚ç‚¹åˆ‡æ¢" # Global supplement
RULE-SET,https://ruleset.skk.moe/List/non_ip/global_plus.conf,"ðŸš€ èŠ‚ç‚¹åˆ‡æ¢" # Global Plus supplement
DOMAIN-SET,https://ruleset.skk.moe/List/domainset/cdn.conf,"ðŸš€ èŠ‚ç‚¹åˆ‡æ¢" # CDN supplement
# > PayPal
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/PayPal/PayPal.list,"ðŸ‡ºðŸ‡² ç¾Žå›½èŠ‚ç‚¹"

# --- Regional Streaming Rules (skk.moe) ---
# > US Streaming
RULE-SET,https://ruleset.skk.moe/List/non_ip/stream_us.conf,"ðŸ‡ºðŸ‡² ç¾Žå›½èŠ‚ç‚¹"
RULE-SET,https://ruleset.skk.moe/List/ip/stream_us.conf,"ðŸ‡ºðŸ‡² ç¾Žå›½èŠ‚ç‚¹"
# > HK Streaming
RULE-SET,https://ruleset.skk.moe/List/non_ip/stream_hk.conf,"ðŸ‡­ðŸ‡° é¦™æ¸¯èŠ‚ç‚¹"
RULE-SET,https://ruleset.skk.moe/List/ip/stream_hk.conf,"ðŸ‡­ðŸ‡° é¦™æ¸¯èŠ‚ç‚¹"
# > Other Regions (Commented out, uncomment and map to groups like "ðŸŒ å…¶ä»–èŠ‚ç‚¹" if needed)
# RULE-SET,https://ruleset.skk.moe/List/non_ip/stream_jp.conf,"ðŸŒ å…¶ä»–èŠ‚ç‚¹"
# RULE-SET,https://ruleset.skk.moe/List/ip/stream_jp.conf,"ðŸŒ å…¶ä»–èŠ‚ç‚¹"
# RULE-SET,https://ruleset.skk.moe/List/non_ip/stream_tw.conf,"ðŸŒ å…¶ä»–èŠ‚ç‚¹"
# RULE-SET,https://ruleset.skk.moe/List/ip/stream_tw.conf,"ðŸŒ å…¶ä»–èŠ‚ç‚¹"
# RULE-SET,https://ruleset.skk.moe/List/non_ip/stream_eu.conf,"ðŸŒ å…¶ä»–èŠ‚ç‚¹"
# RULE-SET,https://ruleset.skk.moe/List/ip/stream_eu.conf,"ðŸŒ å…¶ä»–èŠ‚ç‚¹"
# RULE-SET,https://ruleset.skk.moe/List/non_ip/stream_kr.conf,"ðŸŒ å…¶ä»–èŠ‚ç‚¹"
# RULE-SET,https://ruleset.skk.moe/List/ip/stream_kr.conf,"ðŸŒ å…¶ä»–èŠ‚ç‚¹"

# --- Global Proxy Rules ---
# > Non-CN Traffic (bendusy)
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/geosite/geolocation-!cn.mrs,"ðŸš€ èŠ‚ç‚¹åˆ‡æ¢"

# --- IP Based Rules (bendusy) ---
# > China IPs (Direct)
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/geoip/ChinaCompanyIp.list,"ðŸŽ¯ å…¨çƒç›´è¿ž"
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/geoip/cn_ip.mrs,"ðŸŽ¯ å…¨çƒç›´è¿ž"
# > Google IPs (FCM)
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/geoip/google_ip.mrs,"ðŸ“¢ è°·æ­ŒFCM"
# > Telegram IPs
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/geoip/telegram_ip.mrs,"ðŸ“² ç”µæŠ¥æ¶ˆæ¯"
PROCESS-NAME,Telegram,REJECT-DROP # Prevent abnormal connections from Telegram Swift client
# > Netflix IPs
RULE-SET,https://raw.githubusercontent.com/bendusy/RulesForMe/main/rulesets/geoip/netflix_ip.mrs,"ðŸŽ¥ å¥ˆé£žè§†é¢‘"

# --- Final Rules ---
GEOIP,CN,"ðŸŽ¯ å…¨çƒç›´è¿ž"
FINAL,ðŸŸ æ¼ç½‘ä¹‹é±¼,dns-failed

[Host]
# From Surge_2024.conf
*.taobao.com = server:223.5.5.5
*.tmall.com = server:223.5.5.5
*.alipay.com = server:223.5.5.5
*.alicdn.com = server:223.5.5.5
*.aliyun.com = server:223.5.5.5
*.jd.com = server:119.28.28.28
*.qq.com = server:119.28.28.28
*.tencent.com = server:119.28.28.28
*.weixin.com = server:119.28.28.28
*.bilibili.com = server:119.29.29.29
hdslb.com = server:119.29.29.29
*.163.com = server:119.29.29.29
*.126.com = server:119.29.29.29
*.126.net = server:119.29.29.29
*.127.net = server:119.29.29.29
*.netease.com = server:119.29.29.29
*.mi.com = server:119.29.29.29
*.xiaomi.com = server:119.29.29.29
*testflight.apple.com = server:8.8.4.4
# > Firebase Cloud Messaging
mtalk.google.com = 108.177.125.188
# > Google Dl
dl.google.com = server:119.29.29.29
dl.l.google.com = server:119.29.29.29
update.googleapis.com = server:119.29.29.29
# > Router Admin Panel
amplifi.lan = server:syslib // Ubiquiti Amplifi Router
router.synology.com = server:syslib // Synology Router
sila.razer.com = server:syslib // Razer Sila Router
router.asus.com = server:syslib // Asus Router
routerlogin.net = server:syslib // Netgear Router
orbilogin.com = server:syslib // Netgear Obri Router
www.LinksysSmartWiFi.com = server:syslib // Linksys Router
LinksysSmartWiFi.com = server:syslib // Linksys Router
myrouter.local = server:syslib // Linksys Router
www.miwifi.com = server:syslib // Xiaomi Mi WiFi Router
miwifi.com = server:syslib // Xiaomi Mi WiFi Router
mediarouter.home = server:syslib // Huawei Router
tplogin.cn = server:syslib // TP-Link Router
tplinklogin.net = server:syslib // TP-Link Router
melogin.cn = server:syslib // MERCURY Router
falogin.cn = server:syslib // FAST Router

[URL Rewrite]
# From Surge_2024.conf
# > Redirect Google Search Service
^https?://(www.)?(g|google)\.cn https://www.google.com 302
# > Redirect Google Maps Service
^https?://(ditu|maps).google\.cn https://maps.google.com 302
# > Redirect HTTP to HTTPS
^https?://(www.)?taobao\.com/ https://taobao.com/ 302
^https?://(www.)?jd\.com/ https://www.jd.com/ 302
^https?://(www.)?mi\.com/ https://www.mi.com/ 302
^https?://you\.163\.com/ https://you.163.com/ 302
^https?://(www.)?suning\.com/ https://suning.com/ 302
^https?://(www.)?yhd\.com/ https://yhd.com/ 302
# > AbeamTV header
^https?://api\.abema\.io/v\d/ip/check - reject
# > CUSTOM URL header

[Header Rewrite]
# From Surge_2024.conf
^https?://.*\.zhihu\.com/(question|topic) header-replace User-Agent "osee2unifiedRelease/4432 osee2unifiedReleaseVersion/7.8.0 Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148"

[MITM]
# Combined from surgemini.conf and Surge_2024.conf
ca-passphrase = CDD92A4F # From surgemini
ca-p12 = pdy5zBFBgkqhkiG9w0BCRQxOB42AFMAdQByAGcAZQAgAEcAZQBuAGUAcgBhAHQAZQBkACAAQwBBACAAQwBEAEQAOQAyAEEANABGMC0wITAJBgUrDgMCGgUABBSSBowIZAi2RUiIEImGeX00WTj1ngQIw1bLTBIJaIk= 

skip-server-cert-verify = true
tcp-connection = true
h2 = true
# Combined hostname list (surgemini base doesn't have one explicitly listed, add Surge_2024's)
hostname = www.google.cn, api.abema.io, *.zhihu.com, sub.store # From Surge_2024, removed -CUSTOMMitM 